import{d as R,r as g,a3 as W,O as H,i as _,aj as J,a8 as Q,o as r,e as m,g as e,w as a,s as c,f as k,K as x,h as i,v as f,F as C,z as h,A as N,ac as X,aa as Y,ah as Z,m as ee,a9 as te,ab as ae,W as le,j as se,E as oe,al as ne,aw as ie,ax as ue,a4 as re,V as ce,_ as pe}from"./index-4c180a68.js";/* empty css                   *//* empty css                   *//* empty css               *//* empty css                      */import{u as de}from"./el-popover-757eb6a2.js";import{u as _e}from"./product-e9a75ffc.js";import{b as ge,c as me,d as fe,e as ve}from"./index-b0c2f30a.js";const Se={class:"carousel-content"},ke=["src"],xe=R({__name:"index",setup(we){const o=_e(),V=de(),v=g([]),w=g(0),y=g(!1),D=g(!1),u=g({}),I=W(()=>v.value.map(l=>l.skuDefaultImg));H(()=>{z()});const z=async()=>{V.load(async()=>{const l=await ge(o.sku.pageNo,o.sku.pageSize);l.code===200?(v.value=l.data.records,w.value=l.data.total):_.error("获取SKU失败，请稍后重试")})};J(()=>[o.sku.pageNo,o.sku.pageSize],z);const $=async l=>{(await me(l)).code===200?(_.success(`${l.isSale?"下":"上"}架SKU成功`),l.isSale=l.isSale?0:1):_.error(`${l.isSale?"下":"上"}架SKU失败`)},L=async l=>{y.value=!0;const s=await fe(l.id);s.code===200?u.value=s.data:_.error("获取SKU详情失败")},B=()=>{u.value={}},T=async l=>{(await ve(l.id)).code===200?(_.success("删除成功"),v.value.length<=1?o.sku.pageNo--:await z()):_.error("删除失败")};return(l,s)=>{const E=X,p=Y,j=Z,b=ee,q=te,A=ae,P=le,n=se,d=oe,K=ne,F=ie,G=ue,O=re,U=Q("perm"),M=ce;return r(),m("div",null,[e(P,{class:"card"},{default:a(()=>[e(E,{"current-page":c(o).sku.pageNo,"onUpdate:currentPage":s[0]||(s[0]=t=>c(o).sku.pageNo=t),"page-size":c(o).sku.pageSize,"onUpdate:pageSize":s[1]||(s[1]=t=>c(o).sku.pageSize=t),"page-sizes":[10,20,30],small:!0,layout:"total, sizes, ->, prev, pager, next, jumper",total:w.value},null,8,["current-page","page-size","total"]),e(A,{class:"table",data:v.value},{default:a(()=>[e(p,{label:"序号",type:"index",align:"center",width:"60px"}),e(p,{label:"名称","show-overflow-tooltip":"",prop:"skuName"}),e(p,{label:"描述","show-overflow-tooltip":"",prop:"skuDesc"}),e(p,{label:"图片",width:"130px",align:"center"},{default:a(({row:t,$index:S})=>[e(j,{src:t.skuDefaultImg||"",width:"100px",height:"100px","preview-src-list":I.value,"initial-index":S,"hide-on-click-modal":!0,"preview-teleported":!0},null,8,["src","preview-src-list","initial-index"])]),_:1}),e(p,{label:"重量",width:"80px",align:"center",prop:"weight"}),e(p,{label:"价格",width:"80px",align:"center",prop:"price"}),e(p,{label:"操作",width:"160px",align:"center",fixed:"right"},{default:a(({row:t})=>[k("div",null,[x(e(b,{plain:"",size:"small",type:t.isSale?"info":"primary",icon:t.isSale?"Bottom":"Top",title:`${t.isSale?"下架":"上架"}'SKU`,onClick:S=>$(t)},null,8,["type","icon","title","onClick"]),[[U,"btn.Sku.updown"]]),x(e(b,{plain:"",size:"small",type:"success",icon:"View",title:"SKU信息",onClick:S=>L(t)},null,8,["onClick"]),[[U,"btn.Sku.detail"]]),e(q,{title:`确定要删除${t.skuName}吗？`,width:"200px",onConfirm:S=>T(t)},{reference:a(()=>[x(e(b,{plain:"",size:"small",type:"danger",icon:"Delete",title:"删除SKU"},null,512),[[U,"btn.Sku.remove"]])]),_:2},1032,["title","onConfirm"])])]),_:1})]),_:1},8,["data"]),e(E,{"current-page":c(o).sku.pageNo,"onUpdate:currentPage":s[2]||(s[2]=t=>c(o).sku.pageNo=t),"page-size":c(o).sku.pageSize,"onUpdate:pageSize":s[3]||(s[3]=t=>c(o).sku.pageSize=t),"page-sizes":[10,20,30],small:!0,layout:"total, sizes, ->, prev, pager, next, jumper",total:w.value},null,8,["current-page","page-size","total"])]),_:1}),e(O,{modelValue:y.value,"onUpdate:modelValue":s[4]||(s[4]=t=>y.value=t),title:"SKU详情",width:"70%",gutter:10,onClose:B},{default:a(()=>[x((r(),m("div",null,[e(d,{gutter:15},{default:a(()=>[e(n,{span:4},{default:a(()=>[i("名称")]),_:1}),e(n,{span:20},{default:a(()=>[i(f(u.value.skuName),1)]),_:1})]),_:1}),e(d,{gutter:15},{default:a(()=>[e(n,{span:4},{default:a(()=>[i("描述")]),_:1}),e(n,{span:20},{default:a(()=>[i(f(u.value.skuDesc),1)]),_:1})]),_:1}),e(d,{gutter:15},{default:a(()=>[e(n,{span:4},{default:a(()=>[i("价格")]),_:1}),e(n,{span:20},{default:a(()=>[i(f(u.value.price),1)]),_:1})]),_:1}),e(d,{gutter:15},{default:a(()=>[e(n,{span:4},{default:a(()=>[i("平台属性")]),_:1}),e(n,{span:20},{default:a(()=>[(r(!0),m(C,null,h(u.value.skuAttrValueList,t=>(r(),N(K,{class:"tag",key:t.id},{default:a(()=>[i(f(t.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(d,{gutter:15},{default:a(()=>[e(n,{span:4},{default:a(()=>[i("销售属性")]),_:1}),e(n,{span:20},{default:a(()=>[(r(!0),m(C,null,h(u.value.skuSaleAttrValueList,t=>(r(),N(K,{class:"tag",key:t.id,type:"success"},{default:a(()=>[i(f(t.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(d,{gutter:15},{default:a(()=>[e(n,{span:4},{default:a(()=>[i("商品图片")]),_:1}),e(n,{span:20},{default:a(()=>[k("div",null,[e(G,{interval:4e3,type:"card","indicator-position":"outside"},{default:a(()=>[(r(!0),m(C,null,h(u.value.skuImageList,t=>(r(),N(F,{key:t.id},{default:a(()=>[k("div",Se,[k("img",{src:t.imgUrl},null,8,ke)])]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})])),[[M,D.value]])]),_:1},8,["modelValue"])])}}});const Ke=pe(xe,[["__scopeId","data-v-9cf3ed87"]]);export{Ke as default};
